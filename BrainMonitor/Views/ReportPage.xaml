<UserControl
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:ui="http://schemas.modernwpf.com/2019"
    xmlns:av="http://schemas.microsoft.com/expression/blend/2008" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="av" x:Class="BrainMonitor.Views.ReportPage"
    Background="{DynamicResource SystemControlPageBackgroundAltHighBrush}" av:DesignWidth="634.407">

    <Grid Margin="60,15,60,15">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!-- 主标题 -->
        <TextBlock Text="大脑认知健康报告"
            Style="{StaticResource TitleText}"
            Grid.Row="0" />

        <!-- 测试者信息区域 -->
        <Border Grid.Row="1" Style="{StaticResource CardStyle}" Margin="0,0,0,0">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center">
                <TextBlock Text="姓名: " 
                    Style="{StaticResource ModernLabel}"
                    Margin="0,0,5,0"/>
                <TextBlock x:Name="TesterNameText" 
                    Style="{StaticResource ModernLabel}"
                    Margin="0,0,25,0"/>
                
                <TextBlock Text="手机号: " 
                    Style="{StaticResource ModernLabel}"
                    Margin="0,0,5,0"/>
                <TextBlock x:Name="TesterPhoneText"
                    Foreground="{DynamicResource SystemControlForegroundBaseHighBrush}"
                    Style="{StaticResource ModernLabel}"
                    Margin="0,0,25,0"/>
                
                <TextBlock Text="性别: " 
                    Style="{StaticResource ModernLabel}"
                    Margin="0,0,5,0"/>
                <TextBlock x:Name="TesterGenderText" 
                    Style="{StaticResource ModernLabel}"
                    Margin="0,0,25,0"/>
                
                <TextBlock Text="年龄: " 
                    Style="{StaticResource ModernLabel}"
                    Margin="0,0,5,0"/>
                <TextBlock x:Name="TesterAgeText" 
                    Style="{StaticResource ModernLabel}"/>
            </StackPanel>
        </Border>

        <Border Grid.Row="1" VerticalAlignment="Bottom" Height="2" Margin="0,0,0,0">
            <Border.Background>
                <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                    <GradientStop Color="Transparent" Offset="0"/>
                    <GradientStop Color="#FFB3D1F0" Offset="0.1"/>
                            <GradientStop Color="#FFA3C7E8" Offset="0.5"/>
                            <GradientStop Color="#FFB3D1F0" Offset="0.9"/>
                    <GradientStop Color="Transparent" Offset="1"/>
                </LinearGradientBrush>
            </Border.Background>
        </Border>

        <!-- 关键指标卡片 -->
        <Grid Grid.Row="2">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>

            <!-- AD风险评估卡片 -->
            <Border Style="{StaticResource CardStyle}" Grid.Column="0" Margin="0,0,6,0" HorizontalAlignment="Center">
                <StackPanel>
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,5" HorizontalAlignment="Center">
                        <TextBlock Text="AD风险指数"
                            Style="{StaticResource ModernLabel}"
                            FontSize="14" />
                    </StackPanel>

                    <TextBlock x:Name="RiskPercentageText"
                        FontSize="22"
                        FontWeight="Bold"
                        Foreground="{DynamicResource AccentTextFillColorPrimaryBrush}"
                        HorizontalAlignment="Center"
                        Margin="0,0,0,4" />

                    <TextBlock x:Name="RiskLevelText"
                        FontSize="11"
                        Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"
                        HorizontalAlignment="Center"
                        Margin="0,0,0,6" />

                    <!-- 进度条 -->
                    <Border Height="4"
                        Background="{DynamicResource SystemControlBackgroundBaseLowBrush}"
                        CornerRadius="2">
                        <Border x:Name="RiskProgressBar"
                            Background="{DynamicResource AccentButtonBackground}"
                            CornerRadius="2" />
                    </Border>
                </StackPanel>
            </Border>

            <!-- 大脑年龄卡片 -->
            <Border Style="{StaticResource CardStyle}" Grid.Column="1" Margin="6,0,0,0" HorizontalAlignment="Center">
                <StackPanel>
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,5" HorizontalAlignment="Center">
                        <TextBlock Text="大脑年龄"
                            Style="{StaticResource ModernLabel}"
                            FontSize="14" />
                    </StackPanel>
                    

                    <TextBlock x:Name="BrainAgeText"
                        FontSize="22"
                        FontWeight="Bold"
                        Foreground="{DynamicResource AccentTextFillColorPrimaryBrush}"
                        HorizontalAlignment="Center"
                        Margin="0,0,0,4" />

                    <TextBlock x:Name="BrainAgeComparisonText"
                        FontSize="11"
                        Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"
                        HorizontalAlignment="Center" />
                </StackPanel>
            </Border>
            

        </Grid>

        <Border Grid.Row="2" VerticalAlignment="Bottom" Height="2" Margin="0,0,0,0">
            <Border.Background>
                <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                    <GradientStop Color="Transparent" Offset="0"/>
                    <GradientStop Color="#FFB3D1F0" Offset="0.1"/>
                    <GradientStop Color="#FFA3C7E8" Offset="0.5"/>
                    <GradientStop Color="#FFB3D1F0" Offset="0.9"/>
                    <GradientStop Color="Transparent" Offset="1"/>
                </LinearGradientBrush>
            </Border.Background>
        </Border>

        <!-- 脑电波图和解读 -->
        <StackPanel Grid.Row="3">
            <!-- 脑电波图部分 -->
            <Border Style="{StaticResource CardStyle}" Margin="0,0,0,0">
                <StackPanel>
                    <TextBlock Text="脑电波分析图表"
                         Style="{StaticResource ModernLabel}"
                         FontSize="14"
                         HorizontalAlignment="Center"
                         Margin="0,0,0,10" />

                    <!-- 合并的脑电波图表 -->
                    <StackPanel>
                        <Border Height="200"
                            Background="{DynamicResource SystemControlBackgroundChromeMediumLowBrush}"
                            CornerRadius="6"
                            BorderBrush="{DynamicResource SystemControlForegroundBaseLowBrush}"
                            BorderThickness="1">
                            <Canvas x:Name="CombinedChartCanvas" 
                                Margin="10,0,10,0" />
                        </Border>
                    </StackPanel>
                </StackPanel>
            </Border>

            <!-- 分隔线 -->
            <Border Height="2" Margin="0,0,0,0">
                <Border.Background>
                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                        <GradientStop Color="Transparent" Offset="0"/>
                        <GradientStop Color="#FFB3D1F0" Offset="0.1"/>
                     <GradientStop Color="#FFA3C7E8" Offset="0.5"/>
                     <GradientStop Color="#FFB3D1F0" Offset="0.9"/>
                        <GradientStop Color="Transparent" Offset="1"/>
                    </LinearGradientBrush>
                </Border.Background>
            </Border>

            <!-- 结果解读部分 -->
            <Border Style="{StaticResource CardStyle}">
                <StackPanel>
                    <TextBlock Text="结果值解读"
                         Style="{StaticResource ModernLabel}"
                         FontSize="14"
                         FontWeight="Bold"
                         HorizontalAlignment="Center"
                         Margin="0,0,0,10" />

                    <TextBlock x:Name="ReportAnalysisText"
                        TextWrapping="Wrap"
                        FontSize="12"
                        FontWeight="Bold"
                        Foreground="{DynamicResource SystemControlForegroundBaseHighBrush}" />

                    <TextBlock x:Name="ReportTimeText"
                        FontSize="12"
                        FontWeight="Bold"
                        Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"
                        Margin="0,0,0,0"
                        HorizontalAlignment="Right" />
                </StackPanel>
            </Border>
        </StackPanel>

        <Border Grid.Row="3" VerticalAlignment="Bottom" Height="2" Margin="0,0,0,-5">
            <Border.Background>
                <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                    <GradientStop Color="Transparent" Offset="0"/>
                    <GradientStop Color="#FFB3D1F0" Offset="0.1"/>
                <GradientStop Color="#FFA3C7E8" Offset="0.5"/>
                <GradientStop Color="#FFB3D1F0" Offset="0.9"/>
                    <GradientStop Color="Transparent" Offset="1"/>
                </LinearGradientBrush>
            </Border.Background>
        </Border>

        <!-- 返回按钮 -->
        <Button Style="{StaticResource SecondaryButton}"
            Grid.Row="4"
            HorizontalAlignment="Center"
            Width="120"
            Margin="0,20,0,20"
            Click="ReturnButton_Click">
            <Button.Content>
                <StackPanel Orientation="Horizontal">
                    <ui:FontIcon Glyph="&#xE72B;" 
                        FontSize="16" 
                        Margin="0,0,8,0"/>
                    <TextBlock Text="返回"/>
                </StackPanel>
            </Button.Content>
        </Button>
    </Grid>
</UserControl>